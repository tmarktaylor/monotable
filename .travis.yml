dist: xenial
language: python
sudo: false

matrix:
  include:
    - python: 3.5
      # just run pytest
      install: &utest_install pip install "." pytest
      script: &utest_run py.test --strict

    - python: 3.6
      script: tox -e py36, cover, inspect, readme, manifest, docs,
        experimental_static_type_checking

    - python: 3.7
      install: *utest_install
      script: *utest_run

    - python: pypy
      install: *utest_install
      script: *utest_run

    - python: pypy3
      install: *utest_install
      script: *utest_run

install:
  - pip install coverage coveralls

after_success:
  - coverage combine
  - coveralls
  
branches:
  only:
  - master
  - mono-proto
